# Makmur Warm-Up Project: REST Clean Architecture

This repository contains the code for managing products in an Express application. It includes features for creating, updating, deleting, and retrieving product information. The code follows a clean architecture approach, with separate modules for API, infrastructure, application, and domain layers.

This is a warm-up project for the Software Engineer Intern position at Makmur.id.

## Table of Contents

- [Data](#data)
- [Features](#features)
- [Routes](#routes)
- [Getting Started](#getting-started)
  - [Docker Setup](#docker-setup)
    - [MongoDB Terminal](#mongodb-terminal)
    - [Redis Terminal](#redis-terminal)
  - [Node Setup](#node-setup)

## Data

The product data has the following fields:

- **id**: 24 character hexadecimal string, generated by MongoDB (not updatable)
- **code**: Alphanumeric, max length 12 (updatable, unique)
- **name**: Alphanumeric, max length 100 (updatable)
- **price**: Integer in IDR cents (updatable)
- **volume**: Integer (updatable)
- **deleted**: Boolean (updatable by system, unseen by user)
- **createdAt**: Date (not updatable, unseen by user)
- **updatedAt**: Date (updatable by system, unseen by user)
- **version**: Integer (updatable by system, unseen by user)

## Features
- Create product with data validation
- Get product list and product
- Delete product (soft delete)
- Update product with data validation (excluding price and volume)
- Update price (only)
- Update volume (only)
- Caching to improve performance

## Routes

The API provides the following routes:

- `POST /api/products` - Create a new product
- `DELETE /api/products/:id` - Delete a product
- `GET /api/products/:id` - Get a product by ID
- `GET /api/products` - Get a list of products
- `PATCH /api/products/:id` - Update a product (code and name)
- `PATCH /api/products/:id/price` - Update the price of a product
- `PATCH /api/products/:id/volume` - Update the volume of a product

## Getting Started

### Docker Setup

To set up the required dependencies (MongoDB and Redis) using Docker, make sure you have Docker installed on your machine. Follow these steps:

1. Open a terminal or command prompt.
2. Navigate to the root directory of this repository.
3. Run the following command to start the containers:

```bash
docker-compose up -d
```

This command will start the MongoDB and Redis containers defined in the `docker-compose.yml` file.

#### MongoDB Terminal
To access the MongoDB terminal, follow these steps:
1. Open a new terminal or command prompt.
2. Run the following command to connect to the MongoDB shell:
```bash
mongosh localhost:27017
```
This will connect to the MongoDB instance running on `localhost` with the default port 27017.
3. Once connected, run the following command to switch to the appropriate database:
```bash
use makmurWarmUp
```
This will switch to the `makmurWarmUp` database, where the product data is stored.

#### Redis Terminal
To access the Redis terminal, follow these steps:

1. Open a new terminal or command prompt.
2. Run the following command to enter the shell of the Redis container:
```bash
docker exec -it redis sh
```
3. Once inside the Redis container shell, run the following command to start the Redis command-line interface (CLI):
```bash
redis-cli
```
Now you can interact with Redis using the CLI commands.

### Node Setup

To start the application, follow these steps:

1. Install the dependencies: `npm install`
2. Build the code: `npm run build`
3. Start the application: `npm run start`

Additionally, you can use the development mode using `npm run dev`.